<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>ุฃุณุนุงุฑ ุงูููุฑุฉ ุงูุณูุฑูุฉ ูุญุธุฉ ุจูุญุธุฉ</title>
  <meta http-equiv="refresh" content="600">
  <style>
    body{font-family:Arial;background:#111;color:#0f0;text-align:center;padding:20px}
  </style>
</head>
<body>
  <h1>๐ข ุฃุณุนุงุฑ ุงูููุฑุฉ ุงูุณูุฑูุฉ ูุญุธุฉ ุจูุญุธุฉ</h1>
  <p id="board">Loading...</p>
  <p>ุชุญุฏูุซ ุชููุงุฆู ูู 10 ุฏูุงุฆู</p>
  <p style="color:yellow">ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ (F12)ุ ุซู ุนูุงูุฉ ุงูุชุจููุจ Console ููุณุฎ ุฑูุฒ FCM ุงูุฎุงุต ุจู.</p>
  
  <!-- Firebase scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-messaging-compat.js"></script>
  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyANmR1UrR8aMUag3gNHrFFNmiXMQzekeXg",
      authDomain: "syrian-currency.firebaseapp.com",
      projectId: "syrian-currency",
      storageBucket: "syrian-currency.firebasestorage.app",
      messagingSenderId: "58493358809",
      appId: "1:58493358809:web:cfb1c9d70ef3f30e0424c8",
      measurementId: "G-8G3F9CJT38"
    };
    firebase.initializeApp(firebaseConfig);

    const messaging = firebase.messaging();

    // Get FCM token and print it in the browser console
    messaging.getToken({
      vapidKey: "BCE0fhf0V_z4H8-RXP0rF0DDmnAuIkj3wU8u4NHGx2Jw6DZNxnCwt19YiQ5XSQga71jUUD-G8pllS2ODcSKGJXU"
    })
    .then(token => {
      if (token) {
        console.log("FCM Token:", token); // Copy this token for server-side use
      } else {
        console.warn("No registration token available. Allow notifications and try again.");
      }
    })
    .catch(err => {
      console.error("An error occurred while retrieving token. ", err);
    });
  </script>

  <script>
    // Your original board update code
    fetch('https://raw.githubusercontent.com/live-syrian-rates/live-syrian-rates/main/live_board.json')
      .then(r => r.json())
      .then(d => {
        document.getElementById('board').innerText =
          `ุฏูุดู  ${d.dam_buy} / ${d.dam_sell}  (ูุงุฑู ${d.spread_dam})\n` +
          `ุญูุจ   ${d.ale_buy} / ${d.ale_sell}  (ูุงุฑู ${d.spread_ale})\n` +
          `ุฃููุตุฉ ุงูุฐูุจ  ${d.gold} $`;
      })
      .catch(() => document.getElementById('board').innerText = 'ุฌุงุฑ ุงูุชุญููู...');
  </script>
</body>
</html>
